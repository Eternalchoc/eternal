<!DOCTYPE html>

<html class="scroll-smooth" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Eternal Chocolate Bars ‚Äî Timeless Indulgence</title>
<meta content="Eternal Chocolate Bars ‚Äì timeless, luxurious, handcrafted from single-origin cacao. Discover a piece of eternity." name="description"/>
<meta content="dark chocolate, luxury chocolate, Eternal Bars, artisan cacao, handcrafted chocolate, single-origin" name="keywords"/>
<meta content="Eternal Chocolate Bars" name="author"/>
<meta content="Eternal Chocolate Bars ‚Äî Timeless Indulgence" property="og:title"/>
<meta content="Discover handcrafted, single-origin chocolate that transcends time. Each bar is a timeless experience." property="og:description"/>
<meta content="https://placehold.co/1200x630/0c1445/d4af37?text=Eternal" property="og:image"/>
<meta content="https://yourwebsite.com" property="og:url"/>
<meta content="summary_large_image" name="twitter:card"/>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&amp;family=Montserrat:wght@300;400;500;600&amp;display=swap" rel="stylesheet"/>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>


<style>
        /* Base Styles & Custom Properties */
        :root {
            --midnight-blue: #0c1445;
            --ivory-cream: #f5f5dc;
            --gold-foil: #d4af37;
            --gold-foil-dark: #b48811;
            --gold-foil-light: #fef4a9;
        }

        body {
            background-color: var(--midnight-blue);
            color: var(--ivory-cream);
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            cursor: default;
        }
        
        /* Custom Typography */
        .font-brand { font-family: 'Cinzel Decorative', serif; }

        /* Gold Foil Effect */
        .gold-foil-text {
            background: linear-gradient(145deg, var(--gold-foil-light), var(--gold-foil), var(--gold-foil-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }

        /* Celestial Background */
        .celestial-bg {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill='%23FFFFFF' fill-opacity='0.04'%3E%3Ccircle cx='50' cy='50' r='0.5'/%3E%3Ccircle cx='10' cy='10' r='0.5'/%3E%3Ccircle cx='90' cy='90' r='0.5'/%3E%3Ccircle cx='10' cy='90' r='0.25'/%3E%3Ccircle cx='90' cy='10' r='0.25'/%3E%3Ccircle cx='30' cy='70' r='0.5'/%3E%3Ccircle cx='70' cy='30' r='0.5'/%3E%3C/g%3E%3C/svg%3E");
        }
        
        /* Cursor Glow Effect */
        .cursor-glow {
            position: fixed;
            left: 0;
            top: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.2), transparent 70%);
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: width 0.2s, height 0.2s;
            z-index: 9999;
            display: none; /* Hidden by default, shown for non-touch devices */
        }
        @media (pointer: fine) {
            .cursor-glow { display: block; }
        }
        
        /* Scroll Progress Bar */
        #scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: var(--gold-foil);
            width: 0%;
            z-index: 100;
            transition: width 0.1s;
        }

        /* Custom Buttons */
        .btn-gold {
            border: 1px solid var(--gold-foil);
            color: var(--gold-foil);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .btn-gold:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background-color: var(--gold-foil);
            transition: all 0.3s ease;
            z-index: -1;
        }
        .btn-gold:hover {
            color: var(--midnight-blue);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }
        .btn-gold:hover:before {
            left: 0;
        }

        /* Modal Transitions */
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: all 300ms ease-out; }
        .modal-leave { opacity: 1; transform: scale(1); }
        .modal-leave-active { opacity: 0; transform: scale(0.95); transition: all 300ms ease-in; }

        /* Navigation Active State */
        .nav-link.active {
            color: var(--gold-foil);
            position: relative;
        }
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 1px;
            background-color: var(--gold-foil);
        }
        
        /* Product Card (Wrapper Design) */
        .product-card {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(245, 245, 220, 0.1);
        }
        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.2);
        }
        .product-card .top-section {
            flex: 2;
            background-color: var(--midnight-blue);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill='%23FFFFFF' fill-opacity='0.08'%3E%3Ccircle cx='50' cy='50' r='0.5'/%3E%3Ccircle cx='10' cy='10' r='0.5'/%3E%3Ccircle cx='90' cy='90' r='0.5'/%3E%3C/g%3E%3C/svg%3E");
            color: var(--gold-foil);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
        }
        .product-card .bottom-section {
            flex: 1.2;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            padding: 20px;
            color: var(--ivory-cream);
        }
        .product-card .logo { font-family: 'Cinzel Decorative', serif; font-size: 28px; }
        .product-card .subtitle { font-size: 8px; letter-spacing: 3px; text-transform: uppercase; opacity: 0.8; }
        
        /* Hide scrollbar for cart */
        #cart-items::-webkit-scrollbar, #product-detail-content::-webkit-scrollbar { display: none; }
        #cart-items, #product-detail-content { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="celestial-bg">
<div id="scroll-progress"></div>
<div class="cursor-glow"></div>
<header class="fixed top-0 left-0 right-0 z-50 bg-midnight-blue/80 backdrop-blur-sm border-b border-ivory-cream/10">
<div class="container mx-auto px-6 py-4 flex justify-between items-center">
<a class="font-brand text-3xl gold-foil-text tracking-wider" href="#" onclick="navigateTo('home')">Eternal</a>
<nav class="hidden md:flex items-center space-x-8">
<a class="nav-link text-ivory-cream hover:text-gold-foil transition-colors duration-300 active" data-page="home" href="#" onclick="navigateTo('home')">Home</a>
<a class="nav-link text-ivory-cream hover:text-gold-foil transition-colors duration-300" data-page="shop" href="#" onclick="navigateTo('shop')">Shop</a>
<a class="nav-link text-ivory-cream hover:text-gold-foil transition-colors duration-300" data-page="about" href="#" onclick="navigateTo('about')">About</a>
<a class="nav-link text-ivory-cream hover:text-gold-foil transition-colors duration-300" data-page="contact" href="#" onclick="navigateTo('contact')">Contact</a>
</nav>
<div class="flex items-center space-x-4">
<div id="user-actions">
<button class="text-ivory-cream hover:text-gold-foil transition-colors text-sm" onclick="openAuthModal('signin')">Sign In</button>
<button class="btn-gold px-4 py-1.5 rounded-full text-sm" onclick="openAuthModal('signup')">Sign Up</button>
</div>
<div class="hidden relative" id="user-profile">
<button class="w-8 h-8 bg-gold-foil/20 rounded-full flex items-center justify-center text-gold-foil font-bold" onclick="toggleProfileDropdown()">
<span id="user-initial"></span>
</button>
<div class="absolute top-12 right-0 bg-midnight-blue border border-ivory-cream/10 rounded-md w-48 hidden" id="profile-dropdown">
<a class="block px-4 py-2 hover:bg-ivory-cream/5" href="#">Order History</a>
<a class="block px-4 py-2 hover:bg-ivory-cream/5 text-red-400" href="#" id="logout-btn">Logout</a>
</div>
</div>
<button class="relative" onclick="toggleCart()">
<svg class="text-ivory-cream hover:text-gold-foil transition-colors" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" x2="21" y1="6" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
<span class="absolute -top-2 -right-2 bg-gold-foil text-midnight-blue text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold opacity-0 scale-0 transition-all duration-300" id="cart-badge">0</span>
</button>
<button class="md:hidden text-ivory-cream" id="mobile-menu-btn" onclick="toggleMobileMenu()">
<svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line></svg>
</button>
</div>
</div>
<div class="md:hidden fixed inset-0 bg-midnight-blue/95 backdrop-blur-sm z-40 transform translate-x-full transition-transform duration-300" id="mobile-menu">
<div class="flex flex-col items-center justify-center h-full space-y-8">
<a class="text-3xl font-brand text-ivory-cream hover:text-gold-foil transition-colors" href="#" onclick="navigateTo('home'); toggleMobileMenu()">Home</a>
<a class="text-3xl font-brand text-ivory-cream hover:text-gold-foil transition-colors" href="#" onclick="navigateTo('shop'); toggleMobileMenu()">Shop</a>
<a class="text-3xl font-brand text-ivory-cream hover:text-gold-foil transition-colors" href="#" onclick="navigateTo('about'); toggleMobileMenu()">About</a>
<a class="text-3xl font-brand text-ivory-cream hover:text-gold-foil transition-colors" href="#" onclick="navigateTo('contact'); toggleMobileMenu()">Contact</a>
<div class="mt-8 pt-4 border-t border-ivory-cream/10 flex flex-col items-center space-y-4">
<button class="text-ivory-cream hover:text-gold-foil transition-colors text-xl" onclick="openAuthModal('signin'); toggleMobileMenu()">Sign In</button>
<button class="btn-gold px-6 py-2 rounded-full text-xl" onclick="openAuthModal('signup'); toggleMobileMenu()">Sign Up</button>
</div>
</div>
</div>
</header>
<main>
<div class="page-content" id="home">
<section class="relative h-screen flex items-center justify-center overflow-hidden" id="hero">
<div class="absolute inset-0 z-0 opacity-40 bg-center bg-cover" id="parallax-container" style="background-image: url('https://placehold.co/1920x1080/0c1445/d4af37/jpg?text=Cacao+Starfield');">
<img alt="Celestial Cacao" class="w-full h-full object-cover transform scale-[1.2] transition-transform duration-[0.1s] ease-out" src="https://placehold.co/1920x1080/0c1445/d4af37/jpg?text=Cacao+Starfield"/>
</div>
<div class="relative z-10 text-center p-8 bg-midnight-blue/50 backdrop-blur-sm rounded-xl" data-aos="zoom-in" data-aos-duration="1000">
<h1 class="font-brand text-7xl md:text-9xl gold-foil-text mb-4 tracking-widest leading-tight">Eternal</h1>
<p class="text-2xl md:text-3xl text-ivory-cream/90 font-light tracking-wider italic">Timeless Indulgence</p>
<p class="text-lg mt-6 max-w-xl mx-auto text-ivory-cream/70">Crafted from the finest single-origin cacao, our bars are not just chocolate‚Äîthey are a piece of eternity for you to savor.</p>
<a class="btn-gold inline-block mt-8 px-8 py-3 rounded-full text-lg font-semibold" href="#" onclick="navigateTo('shop')">Discover the Collection</a>
</div>
</section>
<section class="container mx-auto px-6 py-20 text-center" id="features">
<h2 class="font-brand text-5xl gold-foil-text mb-12" data-aos="fade-up">Why Eternal?</h2>
<div class="grid grid-cols-1 md:grid-cols-3 gap-10">
<div class="p-8 rounded-xl bg-ivory-cream/5 border border-ivory-cream/10" data-aos="fade-up" data-aos-delay="100">
<div class="text-gold-foil mb-4 mx-auto w-16 h-16"><svg class="w-full h-full" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20zM12 4v4m0 8v4m-5.6-5.6l2.8 2.8m2.8-5.6l2.8-2.8M6.4 6.4l2.8 2.8M17.6 17.6l-2.8-2.8"></path></svg></div>
<h3 class="font-brand text-2xl text-gold-foil mb-3">Single-Origin Purity</h3>
<p class="text-ivory-cream/70">We source only the rarest, finest cacao beans from single, sustainable estates around the globe.</p>
</div>
<div class="p-8 rounded-xl bg-ivory-cream/5 border border-ivory-cream/10" data-aos="fade-up" data-aos-delay="200">
<div class="text-gold-foil mb-4 mx-auto w-16 h-16"><svg class="w-full h-full" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><rect height="18" rx="2" ry="2" width="18" x="3" y="3"></rect><path d="M7 11v-2m4 0v2m4-2v2m-8 4h12m-8-4h4"></path></svg></div>
<h3 class="font-brand text-2xl text-gold-foil mb-3">Artisan Craft</h3>
<p class="text-ivory-cream/70">Each bar is handcrafted and tempered by master chocolatiers for a flawless, ethereal snap and melt.</p>
</div>
<div class="p-8 rounded-xl bg-ivory-cream/5 border border-ivory-cream/10" data-aos="fade-up" data-aos-delay="300">
<div class="text-gold-foil mb-4 mx-auto w-16 h-16"><svg class="w-full h-full" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path></svg></div>
<h3 class="font-brand text-2xl text-gold-foil mb-3">Cosmic Design</h3>
<p class="text-ivory-cream/70">Our iconic packaging is inspired by the cosmos, making every bar a statement of timeless luxury.</p>
</div>
</div>
</section>
<section class="container mx-auto px-6 py-20 text-center" id="best-sellers">
<h2 class="font-brand text-5xl gold-foil-text mb-4" data-aos="fade-up">Our Timeless Collection</h2>
<p class="text-xl text-ivory-cream/80 mb-12" data-aos="fade-up" data-aos-delay="100">A glimpse into the stars of our chocolate universe.</p>
<div class="grid grid-cols-1 md:grid-cols-3 gap-8" id="home-product-grid">
</div>
<button class="btn-gold inline-block mt-12 px-8 py-3 rounded-full text-lg font-semibold" onclick="navigateTo('shop')">View All Bars</button>
</section>
</div>
<div class="page-content hidden" id="shop">
<section class="container mx-auto px-6 py-20 pt-32 text-center fade-in">
<h2 class="font-brand text-6xl gold-foil-text mb-4" data-aos="fade-down">The Eternal Shop</h2>
<p class="text-xl text-ivory-cream/80 mb-8" data-aos="fade-down" data-aos-delay="100">Find your piece of forever in our meticulously crafted collection.</p>
<div class="flex justify-center space-x-4 mb-12" data-aos="fade-up">
<button class="text-ivory-cream/70 hover:text-gold-foil transition filter-btn active" data-filter="all" onclick="renderProducts('all')">All</button>
<span class="text-ivory-cream/30">|</span>
<button class="text-ivory-cream/70 hover:text-gold-foil transition filter-btn" data-filter="dark" onclick="renderProducts('dark')">Dark Cacao</button>
<span class="text-ivory-cream/30">|</span>
<button class="text-ivory-cream/70 hover:text-gold-foil transition filter-btn" data-filter="milk" onclick="renderProducts('milk')">Milk & Cream</button>
<span class="text-ivory-cream/30">|</span>
<button class="text-ivory-cream/70 hover:text-gold-foil transition filter-btn" data-filter="white" onclick="renderProducts('white')">Infusions</button>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8" id="product-grid">
</div>
</section>
</div>
<div class="page-content hidden" id="about">
<section class="container mx-auto px-6 py-20 pt-32 text-center fade-in">
<h2 class="font-brand text-6xl gold-foil-text mb-4" data-aos="fade-down">The Eternal Story</h2>
<p class="text-xl text-ivory-cream/80 mb-12" data-aos="fade-down" data-aos-delay="100">Where the cosmos meets the finest cacao.</p>
<div class="max-w-4xl mx-auto text-left">
<h3 class="font-brand text-4xl mb-4 gold-foil-text" data-aos="fade-up">üåå Our Genesis</h3>
<p class="text-lg text-ivory-cream/80 mb-8" data-aos="fade-up" data-aos-delay="100">Eternal Chocolate Bars was born from a simple, profound idea: to create a chocolate that defies fleeting trends and stands as a testament to perfection. Our journey began under the canopy of the stars, where the deep mystery of the night sky inspired us to search for the deepest, purest flavors on Earth.</p>
<p class="text-lg text-ivory-cream/80 mb-8" data-aos="fade-up" data-aos-delay="200">From the rich, volcanic soil that nourishes the single-origin cacao to the golden shimmer of its wrapper ‚Äî designed to capture the essence of timeless luxury.</p>
<h3 class="font-brand text-4xl mb-4 gold-foil-text" data-aos="fade-up">üåç Our Philosophy</h3>
<p class="text-lg text-ivory-cream/80 mb-8" data-aos="fade-up" data-aos-delay="100">We craft our chocolates with three guiding values: <span class="text-gold-foil">Purity. Precision. Timelessness.</span><br/> Every recipe begins with the finest single-origin cacao, ethically sourced from sustainable farms around the world. Each blend is meticulously balanced by artisans who understand that flavor is a language of emotion ‚Äî dark and mysterious, smooth and soulful, sweet and eternal.<br/> <em>We don‚Äôt rush. We refine. Because eternity isn‚Äôt made in haste.</em></p>
<h3 class="font-brand text-4xl mb-4 gold-foil-text" data-aos="fade-up">üç´ A Taste Beyond the Moment</h3>
<p class="text-lg text-ivory-cream/80 mb-8" data-aos="fade-up" data-aos-delay="100">Every Eternal Bar is a piece of cosmic craftsmanship:</p>
<ul class="list-none text-ivory-cream/80 mb-8 space-y-2 pl-0" data-aos="fade-up" data-aos-delay="200">
<li class="flex items-start"><span class="text-gold-foil mr-3 text-xl">‚òÖ</span> **Flawless Snap:** The audible perfection of a perfectly tempered bar.</li>
<li class="flex items-start"><span class="text-gold-foil mr-3 text-xl">‚òÖ</span> **Velvet Melt:** A melt that is slow, consistent, and luxurious on the palate.</li>
<li class="flex items-start"><span class="text-gold-foil mr-3 text-xl">‚òÖ</span> **Layered Depth:** Complex notes that unfold over time, mirroring the expanse of the cosmos.</li>
</ul>
<h3 class="font-brand text-4xl mb-4 gold-foil-text" data-aos="fade-up">‚ôæÔ∏è A Piece of Eternity</h3>
<p class="text-lg text-ivory-cream/80 mb-8 italic" data-aos="fade-up" data-aos-delay="100">‚ÄúCrafted from the finest single-origin cacao ‚Äî a piece of eternity for you to savor.‚Äù</p>
<p class="text-lg text-ivory-cream/80 mb-8" data-aos="fade-up" data-aos-delay="200">Join us as we continue to explore the infinite ‚Äî in taste, in design, and in experience. Welcome to the circle of Eternal.</p>
<div class="bg-ivory-cream/5 border border-ivory-cream/10 rounded-lg p-6 mt-12" data-aos="fade-up" data-aos-delay="300">
<p class="text-gold-foil text-sm"> üñãÔ∏è **SEO Summary:** Eternal Chocolate Bars is a luxury chocolate brand crafting single-origin, artisan bars inspired by the cosmos. Combining celestial design, sustainable sourcing, and timeless flavor, Eternal transforms every bar into a piece of edible art.</p>
</div>
</div>
</section>
</div>
<div class="page-content hidden" id="contact">
<section class="container mx-auto px-6 py-20 pt-32 fade-in" data-aos="fade-up">
<h2 class="font-brand text-6xl gold-foil-text text-center mb-4">Contact Eternal</h2>
<p class="text-xl text-ivory-cream/80 text-center mb-20">We are ready to hear from you. Your inquiries are treated with the utmost care.</p>
<div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center" data-aos="fade-up" data-aos-delay="200">
<div class="p-6 bg-ivory-cream/5 rounded-lg border border-ivory-cream/10">
<h3 class="text-xl font-brand gold-foil-text mb-2">Visit Us</h3>
<p class="text-ivory-cream/70">Eternal Cacao Labs<br/>42 Constellation Way, Zenith City, 90210</p>
</div>
<div class="p-6 bg-ivory-cream/5 rounded-lg border border-ivory-cream/10">
<h3 class="text-xl font-brand gold-foil-text mb-2">Call Us</h3>
<p class="text-ivory-cream/70">Sales: +1 (555) 010-ETERN</p>
<p class="text-ivory-cream/70">Support: +1 (555) 011-BARS</p>
</div>
<div class="p-6 bg-ivory-cream/5 rounded-lg border border-ivory-cream/10">
<h3 class="text-xl font-brand gold-foil-text mb-2">Email</h3>
<p class="text-ivory-cream/70">Support: **arhantsg10@gmail.com**</p>
<p class="text-ivory-cream/70">Sales: **god507603@gmail.com**</p>
</div>
</div>
</section>
</div>
</main>
<footer class="bg-midnight-blue/50 border-t border-ivory-cream/10 py-12">
<div class="container mx-auto px-6 text-center">
<a class="font-brand text-4xl gold-foil-text tracking-wider block mb-4" href="#">Eternal</a>
<nav class="flex justify-center space-x-6 mb-6">
<a class="text-ivory-cream/70 hover:text-gold-foil transition-colors text-sm" href="#" onclick="navigateTo('home')">Home</a>
<a class="text-ivory-cream/70 hover:text-gold-foil transition-colors text-sm" href="#" onclick="navigateTo('shop')">Shop</a>
<a class="text-ivory-cream/70 hover:text-gold-foil transition-colors text-sm" href="#" onclick="navigateTo('about')">About</a>
<a class="text-ivory-cream/70 hover:text-gold-foil transition-colors text-sm" href="#" onclick="navigateTo('contact')">Contact</a>
</nav>
<div class="flex justify-center space-x-4 text-ivory-cream/70 mb-8">
<a aria-label="Facebook" class="hover:text-gold-foil transition-colors" href="#"><svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.675 0h-21.35C.598 0 0 .598 0 1.336v21.328C0 23.402.598 24 1.325 24h11.458v-9.292H9.687v-3.616h3.096V8.169c0-3.059 1.865-4.73 4.59-4.73a27.6 27.6 0 0 1 2.76.142v3.213h-1.879c-1.487 0-1.776.708-1.776 1.748v2.296h3.58l-.582 3.616h-2.997V24h6.1C23.402 24 24 23.402 24 22.664V1.336C24 .598 23.402 0 22.675 0z"></path></svg></a>
<a aria-label="Instagram" class="hover:text-gold-foil transition-colors" href="#"><svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.163c3.204 0 3.584.012 4.85.07c3.276.148 4.792 1.688 4.936 4.936.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.144 3.25-1.66 4.792-4.936 4.936-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-3.276-.144-4.792-1.69-4.936-4.936-.058-1.266-.07-1.646-.07-4.85s.012-3.584.07-4.85c.144-3.25 1.66-4.792 4.936-4.936 1.266-.058 1.646-.07 4.85-.07zm0-2.163C8.75 0 8.337.01 7.087.07C3.725.214 1.346 2.596 1.202 5.952.144 7.202.133 7.615.133 12s.011 4.798.07 6.048c.144 3.356 2.523 5.734 5.908 5.878 1.25.058 1.663.07 4.85.07s3.584-.012 4.85-.07c3.356-.144 5.735-2.523 5.878-5.878.058-1.25.07-1.663.07-4.85s-.012-3.584-.07-4.85c-.144-3.356-2.523-5.734-5.908-5.878-1.25-.058-1.663-.07-4.85-.07zm0 6.623a5.377 5.377 0 1 0 0 10.754 5.377 5.377 0 0 0 0-10.754zm0 8.754a3.377 3.377 0 1 1 0-6.754 3.377 3.377 0 0 1 0 6.754zm6.73-8.86a1.262 1.262 0 1 0 0-2.524 1.262 1.262 0 0 0 0 2.524z"></path></svg></a>
<a aria-label="Twitter" class="hover:text-gold-foil transition-colors" href="#"><svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.795-1.574 2.163-2.724-.951.564-2.005.974-3.127 1.195-1.996-2.005-5.322-1.233-6.575 1.583C8.57 6.32 5.485 5.53 2.825 4.145c-1.042 1.761-.51 4.09 1.341 5.234-1.127-.035-2.193-.346-3.12-1.16v.053c0 3.197 2.27 5.86 5.242 6.47-1.09.297-2.26.362-3.41.13.834 2.618 3.255 4.522 6.136 4.576-2.28 1.786-5.163 2.868-8.31 2.868-.54 0-1.07-.032-1.59-.092C4.195 21.84 8.73 23 13.5 23c7.584 0 11.722-6.292 11.722-11.722 0-.178-.003-.355-.01-.532.809-.58 1.507-1.306 2.067-2.136z"></path></svg></a>
</div>
<p class="text-ivory-cream/50 text-sm">¬© 2025 Eternal Chocolate Bars. All Rights Reserved. Crafted with Timeless Purity.</p>
</div>
</footer>
<div class="fixed inset-0 bg-black/70 z-[50] hidden" id="cart-overlay" onclick="toggleCart()"></div>
<div class="fixed top-0 right-0 w-full md:w-96 h-full bg-midnight-blue z-[50] shadow-2xl transform translate-x-full transition-transform duration-300 celestial-bg flex flex-col" id="cart-sidebar">
<div class="p-6 border-b border-ivory-cream/10 flex justify-between items-center">
<h3 class="font-brand text-3xl gold-foil-text">Your Cart</h3>
<button class="text-ivory-cream hover:text-gold-foil" onclick="toggleCart()">
<svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="18" x2="6" y1="6" y2="18"></line><line x1="6" x2="18" y1="6" y2="18"></line></svg>
</button>
</div>
<div class="flex-grow overflow-y-auto p-6 space-y-4" id="cart-items">
<p class="text-ivory-cream/50 text-center mt-10">Your cart is as empty as the void... for now.</p>
</div>
<div class="p-6 border-t border-ivory-cream/10">
<div class="flex justify-between text-xl font-semibold mb-4">
<span>Subtotal:</span>
<span class="gold-foil-text" id="cart-subtotal">‚Çπ0.00</span>
</div>
<button class="btn-gold w-full py-3 rounded-md text-lg font-semibold" disabled id="checkout-btn" onclick="openCheckoutModal()">Proceed to Checkout</button>
</div>
</div>
<div class="fixed inset-0 bg-black/70 z-50 hidden flex items-center justify-center p-4 modal-enter" id="auth-modal" onclick="closeAuthModal()">
<div class="bg-midnight-blue rounded-lg shadow-xl w-full max-w-md p-8 relative celestial-bg" id="auth-modal-content" onclick="event.stopPropagation()">
</div>
</div>
<div class="fixed inset-0 bg-black/70 z-[51] hidden flex items-center justify-center p-4 modal-enter" id="product-detail-modal">
<div class="bg-midnight-blue rounded-lg shadow-xl w-full max-w-4xl h-[90vh] max-h-[700px] relative celestial-bg flex flex-col md:flex-row overflow-y-auto" id="product-detail-content">
</div>
</div>
<div class="fixed inset-0 bg-black/70 z-[52] hidden flex items-center justify-center p-4 modal-enter" id="checkout-modal">
</div>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init({
        duration: 800,
        once: true,
        easing: 'ease-in-out'
    });

    // --- GLOBAL STATE ---
    let cart = []; // { id: 1, name: 'Timeless Dark', price: 15.00, quantity: 2 }

    // Load cart on page load
    loadCartFromStorage();

    // Mock Product Data
    const products = [
        { id: 1, name: 'Timeless Dark', description: '75% Single-Origin Ecuadorian Cacao. Deep, complex notes of cherry and toasted nuts, finished with an eternal velvet melt. Our signature bar.', price: 160.00, category: 'dark', image: 'https://placehold.co/400x500/1e293b/d4af37?text=Timeless+Dark' },
        { id: 2, name: 'Jaggery Swirl', description: 'A celestial blend of 45% Venezuelan Cacao and creamy milk. Notes of caramel and honey, a smooth, otherworldly experience.', price: 130.00, category: 'milk', image: 'https://placehold.co/400x500/1e293b/d4af37?text=Jaggery+Swirl' },
        { id: 3, name: 'Nebula Nectar', description: 'White chocolate infused with golden butterscotch and a whisper of sea salt. A sweet, shimmering nebula of flavor.', price: 150.00, category: 'white', image: 'https://placehold.co/400x500/1e293b/d4af37?text=Nebula+Nectar' },
        { id: 4, name: 'Vanilla Void', description: '85% Dark Cacao with a spark of Mexican ancho chili and cinnamon. A fiery, intense journey across the flavor spectrum.', price: 150.00, category: 'dark', image: 'https://placehold.co/400x500/1e293b/d4af37?text=Vanilla+Void' },
        { id: 5, name: 'Astral Almond', description: '55% Milk chocolate generously studded with toasted, crunchy almonds. A classic flavor, perfected for the ages.', price: 190.00, category: 'milk', image: 'https://placehold.co/400x500/1e293b/d4af37?text=Astral+Almond' },
    ];
    
    // --- HELPER FUNCTIONS ---
    function findProductById(id) {
        return products.find(p => p.id === id);
    }


    // --- CURSOR GLOW EFFECT ---
    document.addEventListener('mousemove', (e) => {
        const glow = document.querySelector('.cursor-glow');
        if (glow) {
            glow.style.left = e.clientX + 'px';
            glow.style.top = e.clientY + 'px';
        }
    });
    
    // --- SCROLL PROGRESS BAR ---
    document.addEventListener('scroll', () => {
        const totalHeight = document.body.scrollHeight - window.innerHeight;
        const progress = (window.pageYOffset / totalHeight) * 100;
        document.getElementById('scroll-progress').style.width = progress + '%';
        
        // Parallax Effect for Hero Image
        const parallax = document.querySelector('#parallax-container img');
        if (parallax) {
            const scrollPosition = window.pageYOffset;
            parallax.style.transform = `scale(1.2) translateY(${scrollPosition * 0.2}px)`;
        }
    });

    // --- USER AUTHENTICATION (MOCK) ---
    function loginUI(user) {
        document.getElementById('user-actions').classList.add('hidden');
        document.getElementById('user-profile').classList.remove('hidden');
        document.getElementById('user-initial').textContent = user.name.charAt(0).toUpperCase();
    }
    
    function logout() {
        localStorage.removeItem('currentUser');
        document.getElementById('user-actions').classList.remove('hidden');
        document.getElementById('user-profile').classList.add('hidden');
        closeProfileDropdown();
    }

    // Check for logged-in user on load
    const storedUser = localStorage.getItem('currentUser');
    if (storedUser) {
        loginUI(JSON.parse(storedUser));
    }
    
    // Logout listener
    document.getElementById('logout-btn').addEventListener('click', (e) => {
        e.preventDefault();
        logout();
    });

    function toggleProfileDropdown() {
        document.getElementById('profile-dropdown').classList.toggle('hidden');
    }

    function closeProfileDropdown() {
        document.getElementById('profile-dropdown').classList.add('hidden');
    }

    function openAuthModal(type) {
        const modal = document.getElementById('auth-modal');
        const content = document.getElementById('auth-modal-content');
        let title = type === 'signin' ? 'Welcome Back' : 'Create Account';
        let formHtml;

        if (type === 'signin') {
            formHtml = `
                <h3 class="font-brand text-3xl text-center mb-6 gold-foil-text">${title}</h3>
                <form id="auth-form" onsubmit="event.preventDefault(); handleAuth('signin')">
                    <input type="email" id="auth-email" placeholder="Email" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-4 text-ivory-cream">
                    <input type="password" id="auth-password" placeholder="Password" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-6 text-ivory-cream">
                    <p class="text-center text-red-400 text-sm h-4 mb-4" id="auth-status"></p>
                    <button type="submit" class="btn-gold w-full py-3 rounded-md text-lg font-semibold">Sign In</button>
                    <p class="text-center text-ivory-cream/70 mt-4">Don't have an account? <a href="#" onclick="openAuthModal('signup')" class="text-gold-foil hover:underline">Sign Up</a></p>
                </form>
            `;
        } else {
            formHtml = `
                <h3 class="font-brand text-3xl text-center mb-6 gold-foil-text">${title}</h3>
                <form id="auth-form" onsubmit="event.preventDefault(); handleAuth('signup')">
                    <input type="text" id="auth-name" placeholder="Full Name" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-4 text-ivory-cream">
                    <input type="email" id="auth-email" placeholder="Email" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-4 text-ivory-cream">
                    <input type="password" id="auth-password" placeholder="Password (min 6 chars)" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-6 text-ivory-cream">
                    <p class="text-center text-red-400 text-sm h-4 mb-4" id="auth-status"></p>
                    <button type="submit" class="btn-gold w-full py-3 rounded-md text-lg font-semibold">Create Account</button>
                    <p class="text-center text-ivory-cream/70 mt-4">Already have an account? <a href="#" onclick="openAuthModal('signin')" class="text-gold-foil hover:underline">Sign In</a></p>
                </form>
            `;
        }
        
        content.innerHTML = formHtml;
        content.insertAdjacentHTML('afterbegin', `
            <button class="absolute top-4 right-4 text-ivory-cream/70 hover:text-gold-foil transition-colors" onclick="closeAuthModal()">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            </button>
        `);

        modal.classList.remove('hidden', 'modal-leave-active');
        modal.classList.add('modal-enter-active');
    }

    function closeAuthModal() {
        const modal = document.getElementById('auth-modal');
        modal.classList.remove('modal-enter-active');
        modal.classList.add('modal-leave-active');
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 300);
    }
    
    function handleAuth(type) {
        const email = document.getElementById('auth-email').value;
        const password = document.getElementById('auth-password').value;
        const statusEl = document.getElementById('auth-status');
        statusEl.textContent = '';

        if (password.length < 6) {
            statusEl.textContent = 'Password must be at least 6 characters.';
            return;
        }

        // Simulate network delay
        setTimeout(() => {
            if (type === 'signup') {
                const name = document.getElementById('auth-name').value;
                const newUser = { name: name, email: email, token: 'mock_token_456' };
                localStorage.setItem('currentUser', JSON.stringify(newUser));
                loginUI(newUser);
                closeAuthModal();
            } else {
                // For Sign In, we'll use the default user if credentials match the mock
                if (email === 'user@example.com' && password === 'password') {
                    const mockUser = { name: 'Eternal User', email: email, token: 'mock_token_123' };
                    localStorage.setItem('currentUser', JSON.stringify(mockUser));
                    loginUI(mockUser);
                    closeAuthModal();
                } else {
                    statusEl.textContent = 'Invalid email or password.';
                }
            }
        }, 500); // Simulate network delay
    }

    // --- NAVIGATION ---
    function navigateTo(pageId) {
        document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
        const targetPage = document.getElementById(pageId);
        if (targetPage) {
            targetPage.classList.remove('hidden');
        } else {
            console.error('Page not found:', pageId);
        }

        // Update active nav link
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
            if (link.dataset.page === pageId) {
                link.classList.add('active');
            }
        });

        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
        // Re-initialize AOS for the new page content
        AOS.refreshHard();
    }

    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('translate-x-full');
    }

    // --- PRODUCT RENDERING ---
    // Helper function to generate the common product card HTML
    function createProductCardHTML(product) {
        return `
            <div class="top-section flex flex-col justify-center items-center p-6" style="background-image: url('${product.image}'); background-size: cover; background-position: center;">
                <span class="subtitle mt-2">${product.category} COLLECTION</span>
                <div class="logo mt-4">${product.name}</div>
                <div class="mt-auto pt-4 flex-grow flex items-center justify-center">
                    <svg class="w-16 h-16 opacity-70" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="30" stroke="var(--gold-foil-light)" stroke-width="1.5" fill="none"/>
                        <path d="M 50 20 L 55 30 L 50 40 L 45 30 Z" fill="var(--gold-foil-light)"/>
                    </svg>
                </div>
            </div>
            <div class="bottom-section p-4">
                <h3 class="font-semibold text-lg text-ivory-cream">${product.name}</h3>
                <p class="text-gold-foil text-2xl font-bold my-2">‚Çπ${product.price.toFixed(2)}</p>
                <div class="flex flex-col space-y-2 w-full mt-3">
                    <button class="btn-gold px-4 py-2 rounded-full font-semibold text-sm w-full" 
                        onclick="addToCart(${product.id}, 1)">Add to Cart</button>
                    <button class="text-ivory-cream/70 hover:text-gold-foil text-sm" 
                        onclick="openProductDetail(${product.id})">Quick View</button>
                </div>
            </div>
        `;
    }

    function renderProducts(filter = 'all') {
        const productGrid = document.getElementById('product-grid');
        const homeProductGrid = document.getElementById('home-product-grid');
        
        // Clear previous products
        if (productGrid) productGrid.innerHTML = '';
        if (homeProductGrid) homeProductGrid.innerHTML = '';

        // 1. Logic for SHOP PAGE (Renders all filtered products)
        const filteredProducts = filter === 'all' ? products : products.filter(p => p.category === filter);
        if (productGrid) {
            filteredProducts.forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.setAttribute('data-aos', 'fade-up');
                card.setAttribute('data-aos-delay', index * 100);
                card.innerHTML = createProductCardHTML(product);
                productGrid.appendChild(card);
            });
        }

        // 2. Logic for HOME PAGE (Renders the first 3 products as 'best sellers')
        if (homeProductGrid && filter === 'all') {
            // Only render the first 3 products for the home page when the 'all' filter is active
            products.slice(0, 3).forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.setAttribute('data-aos', 'fade-up');
                card.setAttribute('data-aos-delay', index * 100);
                card.innerHTML = createProductCardHTML(product);
                homeProductGrid.appendChild(card);
            });
        }
        
        // Update filter button active state (only relevant for shop page)
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.filter === filter) {
                btn.classList.add('active');
            }
        });
    }

    function openProductDetail(productId) {
        const product = findProductById(productId);
        if (!product) return;

        const modal = document.getElementById('product-detail-modal');
        const content = document.getElementById('product-detail-content');

        content.innerHTML = `
            <button class="absolute top-4 right-4 text-ivory-cream/70 hover:text-gold-foil transition-colors z-20" onclick="closeProductDetail()">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            </button>
            <div class="md:w-1/2 p-6 md:p-10 flex flex-col justify-center items-center relative overflow-hidden">
                <div class="w-64 h-80 md:w-full md:h-full max-w-sm" style="background-image: url('${product.image}'); background-size: cover; background-position: center; border-radius: 12px; box-shadow: 0 0 30px rgba(0,0,0,0.5);">
                    <div class="w-full h-full flex items-center justify-center relative">
                        <p class="font-brand text-4xl font-bold text-ivory-cream/90">${product.name.toUpperCase()}</p>
                        <svg class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-40 h-40 opacity-50" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="45" stroke="#fef4a9" stroke-width="2" fill="none"/>
                            <circle cx="50" cy="50" r="35" stroke="#fef4a9" stroke-width="1" stroke-dasharray="5 5" fill="none"/>
                        </svg>
                    </div>
                </div>
            </div>
            <div class="md:w-1/2 p-6 md:p-10 flex flex-col justify-between">
                <div>
                    <span class="text-xs text-gold-foil uppercase tracking-widest mb-2 block">${product.category} Collection</span>
                    <h2 class="font-brand text-4xl md:text-5xl gold-foil-text mb-4">${product.name}</h2>
                    <p class="text-ivory-cream/70 mb-6">${product.description}</p>
                    <div class="text-3xl font-bold text-gold-foil mb-6">‚Çπ${product.price.toFixed(2)}</div>
                    
                    <div class="flex items-center space-x-4 mb-8">
                        <label class="text-ivory-cream/70 font-semibold" for="detail-qty">Quantity:</label>
                        <input type="number" id="detail-qty" value="1" min="1" class="w-20 bg-ivory-cream/5 p-2 rounded-md border border-ivory-cream/20 text-center focus:outline-none focus:ring-1 focus:ring-gold-foil text-ivory-cream">
                    </div>
                </div>
                <div class="mt-auto">
                    <button class="btn-gold w-full py-3 rounded-md text-lg font-semibold" onclick="addToCart(${product.id}, document.getElementById('detail-qty').value)">Add to Cart</button>
                </div>
            </div>
        `;

        modal.classList.remove('hidden', 'modal-leave-active');
        modal.classList.add('modal-enter-active');
    }

    function closeProductDetail() {
        const modal = document.getElementById('product-detail-modal');
        modal.classList.remove('modal-enter-active');
        modal.classList.add('modal-leave-active');
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 300);
    }

    // --- CART LOGIC ---
    function addToCart(productId, quantityInput) {
        const quantity = parseInt(quantityInput);
        if (quantity < 1 || isNaN(quantity)) {
            alert('Please select a valid quantity.');
            return;
        }
        
        const product = findProductById(productId);
        const cartItem = cart.find(item => item.id === productId);

        if (cartItem) {
            cartItem.quantity += quantity;
        } else {
            // Only store essential data in cart
            cart.push({ id: product.id, name: product.name, price: product.price, quantity: quantity });
        }
        
        updateCartUI();
        saveCartToStorage();
        toggleCart(true); // Open cart sidebar
        closeProductDetail(); // Close detail modal if open
    }

    function renderCartItems() {
        const cartItemsEl = document.getElementById('cart-items');
        let subtotal = 0;

        if (cart.length === 0) {
            cartItemsEl.innerHTML = '<p class="text-ivory-cream/50 text-center mt-10">Your cart is as empty as the void... for now.</p>';
            return 0;
        }

        cartItemsEl.innerHTML = ''; // Clear previous content

        cart.forEach(item => {
            const product = findProductById(item.id); // Get full product data to retrieve image
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;
            const imageUrl = product ? product.image.replace('400x500', '80x80') : 'https://placehold.co/80x80/000/fff?text=?';

            const itemEl = document.createElement('div');
            itemEl.className = 'flex items-center space-x-4 p-3 bg-ivory-cream/5 rounded-lg border border-ivory-cream/10';
            itemEl.innerHTML = `
                <img src="${imageUrl}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md"/>
                <div class="flex-grow">
                    <p class="font-semibold text-ivory-cream">${item.name}</p>
                    <p class="text-gold-foil text-sm">‚Çπ${item.price.toFixed(2)}</p>
                </div>
                <div class="flex items-center space-x-2">
                    <button onclick="changeQuantity(${item.id}, -1)" class="text-xs w-5 h-5 border border-ivory-cream/20 rounded-full hover:bg-ivory-cream/10 transition">-</button>
                    <span class="text-sm w-4 text-center">${item.quantity}</span>
                    <button onclick="changeQuantity(${item.id}, 1)" class="text-xs w-5 h-5 border border-ivory-cream/20 rounded-full hover:bg-ivory-cream/10 transition">+</button>
                </div>
            `;
            cartItemsEl.appendChild(itemEl);
        });
        return subtotal;
    }

    function changeQuantity(productId, delta) {
        const item = cart.find(i => i.id === productId);
        if (!item) return;

        item.quantity += delta;
        if (item.quantity <= 0) {
            cart = cart.filter(i => i.id !== productId);
        }

        updateCartUI();
        saveCartToStorage();
    }

    function updateCartUI() {
        const badge = document.getElementById('cart-badge');
        const subtotalEl = document.getElementById('cart-subtotal');
        const checkoutBtn = document.getElementById('checkout-btn');

        // 1. Render items and get subtotal
        const subtotal = renderCartItems();

        // 2. Calculate total items for the badge
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);

        // 3. Update badge
        if(totalItems > 0) {
            badge.textContent = totalItems;
            badge.classList.remove('opacity-0', 'scale-0');
        } else {
             badge.classList.add('opacity-0', 'scale-0');
        }

        // 4. Update subtotal and button
        subtotalEl.textContent = `‚Çπ${subtotal.toFixed(2)}`;
        checkoutBtn.disabled = cart.length === 0;

    }
    
    function saveCartToStorage() {
        localStorage.setItem('eternal_cart', JSON.stringify(cart));
    }
    
    function loadCartFromStorage() {
        const storedCart = localStorage.getItem('eternal_cart');
        if(storedCart) {
            cart = JSON.parse(storedCart);
        }
    }
    
    function toggleCart(forceOpen = false) {
        const sidebar = document.getElementById('cart-sidebar');
        const overlay = document.getElementById('cart-overlay');
        
        const isOpen = !sidebar.classList.contains('translate-x-full');

        if(forceOpen && !isOpen) {
            // Force open
            sidebar.classList.remove('translate-x-full');
            overlay.classList.remove('hidden');
        } else if (!forceOpen && isOpen) {
            // Close
            sidebar.classList.add('translate-x-full');
            overlay.classList.add('hidden');
        } else if (!forceOpen && !isOpen) {
             // Open
            sidebar.classList.remove('translate-x-full');
            overlay.classList.remove('hidden');
        }
    }
    
    // --- CHECKOUT LOGIC ---
    function openCheckoutModal() {
        const modal = document.getElementById('checkout-modal');
        modal.classList.remove('hidden', 'modal-leave-active');
        modal.classList.add('modal-enter-active');
        renderCheckoutForm();
    }

    function closeCheckout() {
        const modal = document.getElementById('checkout-modal');
        modal.classList.remove('modal-enter-active');
        modal.classList.add('modal-leave-active');
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 300);
    }
    
    function renderCheckoutForm() {
        const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        const modal = document.getElementById('checkout-modal');

        modal.innerHTML = `
            <div class="bg-midnight-blue rounded-lg shadow-xl w-full max-w-md p-8 relative celestial-bg" onclick="event.stopPropagation()">
                <button class="absolute top-4 right-4 text-ivory-cream/70 hover:text-gold-foil transition-colors" onclick="closeCheckout()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                </button>
                <h3 class="font-brand text-3xl text-center mb-8 gold-foil-text">Final Frontier</h3>
                
                <div id="order-success" class="hidden text-center py-10">
                    <svg class="w-16 h-16 text-gold-foil mx-auto mb-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 12l2 2 4-4m5.618-4.996a12 12 0 10-16.897 0 12 12 0 0016.897 0z" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                    <p class="font-brand text-2xl gold-foil-text mb-2">Order Placed!</p>
                    <p class="text-ivory-cream/70">Your piece of eternity is on its way.</p>
                </div>

                <form id="payment-form">
                    <div id="checkout-form-fields">
                        <h4 class="text-xl font-semibold text-gold-foil mb-4">Shipping Details</h4>
                        <input type="text" placeholder="Full Name" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-4 text-ivory-cream">
                        <input type="text" placeholder="Shipping Address" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-4 text-ivory-cream">
                        <input type="text" placeholder="City, State, Zip" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-4 text-ivory-cream">
                        <input type="email" placeholder="Contact Email" required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil mb-6 text-ivory-cream">
                        
                        <h4 class="text-xl font-semibold text-gold-foil mb-4">Payment Method</h4>
                        <select required class="w-full bg-ivory-cream/5 p-3 rounded-md border border-ivory-cream/20 focus:outline-none focus:ring-1 focus:ring-gold-foil text-ivory-cream">
                            <option value="" disabled selected>Select Payment Method</option>
                            <option value="cod">Cash on Delivery (COD)</option>
                            <option value="card">Credit/Debit Card (Mock)</option>
                            <option value="upi">UPI (Mock)</option>
                        </select>
                    </div>

                    <div class="flex justify-between text-lg pt-4 font-semibold border-t border-ivory-cream/10"><span>Total:</span> <span class="text-gold-foil font-bold">‚Çπ${subtotal.toFixed(2)}</span></div>
                    <button type="submit" class="btn-gold w-full py-3 mt-4 rounded-md">Place Order</button>
                </form>
            </div>
        `;

        document.getElementById('payment-form').addEventListener('submit', (e) => {
            e.preventDefault();
            // Mock payment success logic
            document.getElementById('checkout-form-fields').classList.add('hidden'); // Hide fields
            document.getElementById('order-success').classList.remove('hidden');
            document.getElementById('payment-form').querySelector('button[type="submit"]').classList.add('hidden'); // Hide place order button
            cart = []; // Empty the cart
            updateCartUI(); // Update cart badge and sidebar
            setTimeout(closeCheckout, 4000); // Close modal after a delay
        });
    }

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        renderProducts();
        updateCartUI();
        navigateTo('home');
    });

</script>
</body>
</html>
